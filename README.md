# My-Shell
Simple shell for Unix. Για την μεταγλώτηση τρέξε την εντολή make και για την εκτέλεση ./mysh

Οι τρείς βασικές συναρτήσεις είναι η main η processString και η execute_command.

Η main διαβάζει την εντολή την αποθηκεύει σε μια δομή για την υλοποίηση του ιστορικού και
καλεί την execute_command, ενώ επίσης ορίζει την συνάρτηση διαχείρισης του σηματος SIGCHLD και 
οτι τα σηματα ctrl c και ctrl z θα αγνούνται.

Η execute_command κάνει parse την εντολή και άμα η εντολή δεν περιέχει κάποιο εκτελέσιμο (δηλαδή είναι μια 
από τις βασικές εντολές που υποστιρίζει το κέλυφος) την εκτελεί αλλιώς καλεί την processString για να την εκτελέσει.

Η processString επεξεργάζεται τα tokens της εντολής και υλοποιεί τις βασικές λειτουργίες του κελύφους (δηλαδή 
Ανακατεύθυνση εισόδου / εξόδου, Υποστήριξη σωληνώσεων, Εκτέλεση εντολών στο Background, Υποστήριξη wild characters),
ενώ στο τέλος εκτελεί το εκτελέσιμο αρχείο.

1. Υποστήριξη Ανακατευθύνσεων

Οι ανακατευθύνσεις υλοποιούνται στην processString. Αν ένα token αντιστοιχεί σε σύμβολο ανακατεύθυνσης ξέρουμε
οτι το επόμενο token θα είναι ένα όνομα αρχείου το οποίο και αποθηκεύουμε για να το ανοίξει το παιδί που θα 
εκτελέσει το εκτελέσιμο πρόγραμμα. Επίσης αποθηκεύουμε και τον τύπο της ανακατεύθυνσης.

2. Υποστήριξη σωληνώσεων

Οι σωληνώσεις υλοποιούνται στην processString. Αν ένα token αντιστοιχεί σε σύμβολο σωλήνωσης τότε θα πρέπει να 
δημιουργήσουμε ένα pipe. Επειδή όταν έχουμε σωλήνωση χρειάζεται να εκτελεστουν δύο προγράμματα, όταν εντοπίσουμε 
σύμβολο σωλήνωσης σταματάμε την επεξεργασία των tokens και αφήνουμε το παιδί να εκτελέσει το πρόγραμμα, ενώ ο 
γονέας ξανα καλεί την processString ώστε να εκτελεστεί και η υπόλοιπη εντολή μεταφέροντας το read end του pipe 
για να ξέρει το επόμενο πρόγραμμα οτι υπήρχε σωλήνωση και από που θα διαβάζει.

3. Εκτέλεση εντολών στο Background

Η εκτέλεση εντολών στο background υλοποιείται στην processString. Αν ένα token αντιστοιχεί σε σύμβολο εκτέλεσης
εντολής στο background τότε αυτό αποθηκεύεται, ενώ όταν το παιδί πάει να εκτελέσει την εντολή αφήνει τα σήματα
ctrl c και ctrl z να αγνούνται. Ο πάτερας απο την άλλη δεν περιμένει το παιδί να τελειώσει και προχοράει στην 
επόμενη εντολή, ενώ για να μην γίνει zombie το παιδί παριμένει για το status του όταν τελειώσει και σταλθεί ένα
σήμα SIGCHLD μέσω της συνάρτησης background_termination.  

4. Υποστήριξη wild characters
Η υποστήριξη wild characters υλοποιείται στην processString. Αν ένα token εμπεριέχει κάποιο wildcard τότε ξέρουμε
ότι υποδηλώνει ένα υποσύνολο αρχείων. Για να βρούμε αυτό το υποσύνολο καλούμε την συνάρτηση wildcard. Η wildcard
με την σειρά της καλέι την glob η οποία δίνοντας της το token βρήσκει το υποσύνολο αρχείων αν υπάρχει. Για 
οποιοδείποτε λάθος εκτυπώνεται αντίστοιχο μήνυμα. 

5. Διαχείριση aliases

Τα aliases είναι μεταβλητές τύπου struct aliasEntry και αποθηκεύονται σε μια δομή δεδομένων ώστε να ανακτούνται
όταν χρειάζεται. Οι εντολές που διαχειρίζονται τα aliases υλοποιούνται στην execute_command (δηλαδή αποθήκευση
και διαγραφή κάποιου alias). Επίσης η execute_command υλοποιεί και την εκτέλεση των aliases, καθώς εντοπίζει αν
η εντολή περιέχει καποιο ενεργό alias και την αντικαθηστά με την εντολή που αντιστοιχεί στο alias που βρήκε.

6. Διαχείριση Σημάτων

Τα σήματα ctrl c και ctrl z αγνούνται από το κέλυφος ενώ γίνεται η defult διαδικασία στις διεργασίες παιδία που δεν
τρέχουν στο background. Επίσης η background_termination διαχειρίζεται το SIGCHLD ωστε να περιμένει τις διεργασίες
που τρέχουν στο background.

7. Αποθήκευση ιστορικού 

Το ιστορικό των εντολών αποθηκεύεται σε μία δομή και εμφανίζεται με την εντολή "history", ενώ με την εντολή 
"history αριθμός εντολής" εκτελείται η εντολή με εκείνο τον αριθμό.

Γενικά

Έχω υλοποιήσει και την εντολή cd (εμπεριέχεται στις βασικές εντολές που εκτελεί η execute_command).
Κάθε συνάρτηση που χρεισημοποιώ που δεν είναι δικία μου σε περίπτωση λάθους εκτελείτε η perror για να
εμφανιστεί το μήνυμα λάθους.
Μόνο όταν κάποιο παιδί δεν επιστρέψει status 0 εμφανίζω το id του και το status του.
Με την εντολή "printalias" εκτυπώνονται τα ενεργά aliases.
Όταν τρέχει μια διεργασία στο background εκτυπώνεται ενα μήνυμα οτι η διεργασία αυτή τρέχει στο background
και υπάρχει ένα bug, καθώς άμα αυτή η διεργασία τελειώνει γρήγορα και εμφανίζει αποτελέσματα τότε το promt 
του κελύφους εκτυπώνεται μαζί με τα αποτελέσματα.
Επίσης κάθε εντολή που δίνεται θα πρέπει να διαχωρίζεται με κενά για να την καταλαβαίνει το κέλυφος
πχ. το ./count1&; ./count2&; δεν το καταλαβαίνει θα πρέπει να δωθεί ετσι ./count1 &; ./count2 &;
και μια εντολή δεν επηρεαζεται απο το ctrl c και το  ctrl z αν είναι στο background οπως γινεται και στο bash shell.
